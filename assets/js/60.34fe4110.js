(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{226:function(e,t,a){"use strict";a.r(t);var o=a(0),s=Object(o.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"github-page-部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-page-部署","aria-hidden":"true"}},[e._v("#")]),e._v(" Github Page 部署")]),e._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("部署 Github Page 使用 "),a("code",[e._v("git push --force")]),e._v(" 覆盖当前分支的历史记录，所以确定你只是处于这个特殊的目的部署到分支，就像 "),a("code",[e._v("gh_pages")]),e._v(" 。\n可能需要通过设置 "),a("code",[e._v("keep_history")]),e._v(" 为 "),a("code",[e._v("true")]),e._v(' 禁止"force push"行为，')])]),e._v(" "),a("p",[e._v("Travis CI 可以在 build 成功后部署你的静态文件到 Github Page 。"),a("br"),e._v("\n你可能需要提供一个 "),a("code",[e._v("access token")]),e._v(" 然后设置部署提供者的细节。 "),a("br"),e._v("\n下面是一个最小化配置，添加到你的 "),a("code",[e._v(".travis.yml")]),e._v(" 。")]),e._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("deploy:\n  provider: pages\n  skip_cleanup: true\n  github_token: $GITHUB_TOKEN  # Set in the settings page of your repository, as a secure variable\n  keep_history: true\n  on:\n    branch: master\n")])])]),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("确定你将 "),a("code",[e._v("skip_cleanup")]),e._v(" 设置为 "),a("code",[e._v("true")]),e._v(" ，否则 Travis CI 将会删除所有构建中创建的文件， 这可能会删除你想上传的文件。")])]),e._v(" "),a("h2",{attrs:{id:"设置-github-token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-github-token","aria-hidden":"true"}},[e._v("#")]),e._v(" 设置 Github token")]),e._v(" "),a("p",[e._v("你需要生成一个个人 "),a("code",[e._v("public_repo")]),e._v(" 或 "),a("code",[e._v("repo")]),e._v(" "),a("code",[e._v("access token")]),e._v(" 。（ 对于私有项目 "),a("code",[e._v("repo")]),e._v(" 是必须的）。由于 token 应该是私有的\n你想要在你的仓库设置或在 "),a("code",[e._v(".travis.yml")]),e._v(" 中通过加密变量的方式安全的将他发送到  Travis 。")]),e._v(" "),a("h2",{attrs:{id:"之后的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#之后的配置","aria-hidden":"true"}},[e._v("#")]),e._v(" 之后的配置")]),e._v(" "),a("ul",[a("li",[e._v("local_dir: 推送到 Github Page 的目录，默认当前目录。 可以通过绝对路径或相对路径特殊指定。")]),e._v(" "),a("li",[e._v("repo: Repo slug, 默认当前 repo.")]),e._v(" "),a("li",[e._v("target_branch: 推送 local_dir 内容到分支（force，查看: keep_history）, 默认  gh_pages。")]),e._v(" "),a("li",[e._v("keep_history: Optional, create incremental commit instead of doing push force, defaults to false.")]),e._v(" "),a("li",[e._v("fqdn: Optional, sets a custom domain for your website, defaults to no custom domain support.")]),e._v(" "),a("li",[e._v("project_name: Defaults to value of fqdn or repo slug, used for metadata.")]),e._v(" "),a("li",[e._v("email: 配置项, 提交者信息, 默认 deploy@travis-ci.org.")]),e._v(" "),a("li",[e._v("name: 配置项, 提交者, 默认部署机器人。")]),e._v(" "),a("li",[e._v("committer_from_gh: Optional, defaults to false. Allows you to use the token’s owner name and email for commit. Overrides email and name options.")]),e._v(" "),a("li",[e._v("allow_empty_commit: Optional, defaults to false. Enabled if only keep_history is true.")]),e._v(" "),a("li",[e._v("github_url: Optional, the URL of the self-hosted GitHub enterprise, defaults to github.com.")]),e._v(" "),a("li",[e._v("verbose: Optional, be verbose about internal steps, defaults to false.")]),e._v(" "),a("li",[e._v("deployment_file: Optional, defaults to false, enables creation of deployment-info files.")])])])}],!1,null,null,null);t.default=s.exports}}]);