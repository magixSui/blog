<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue 基础 | MAGIX</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.5a9f4582.css" as="style"><link rel="preload" href="/blog/assets/js/app.6d92ea86.js" as="script"><link rel="preload" href="/blog/assets/js/80.eb982d6e.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.5c298fb9.js"><link rel="prefetch" href="/blog/assets/js/11.deb2b9c6.js"><link rel="prefetch" href="/blog/assets/js/12.e0c6e832.js"><link rel="prefetch" href="/blog/assets/js/13.f5bcb9af.js"><link rel="prefetch" href="/blog/assets/js/14.bc639cc8.js"><link rel="prefetch" href="/blog/assets/js/15.9704b83a.js"><link rel="prefetch" href="/blog/assets/js/16.22026520.js"><link rel="prefetch" href="/blog/assets/js/17.b99c2126.js"><link rel="prefetch" href="/blog/assets/js/18.405b20f1.js"><link rel="prefetch" href="/blog/assets/js/19.9697ef3a.js"><link rel="prefetch" href="/blog/assets/js/2.d8f505d4.js"><link rel="prefetch" href="/blog/assets/js/20.4f9c8df8.js"><link rel="prefetch" href="/blog/assets/js/21.b1b060ab.js"><link rel="prefetch" href="/blog/assets/js/22.546848b3.js"><link rel="prefetch" href="/blog/assets/js/23.150010cf.js"><link rel="prefetch" href="/blog/assets/js/24.b59cfbab.js"><link rel="prefetch" href="/blog/assets/js/25.a6f90dc8.js"><link rel="prefetch" href="/blog/assets/js/26.06a81a6c.js"><link rel="prefetch" href="/blog/assets/js/27.3420ece2.js"><link rel="prefetch" href="/blog/assets/js/28.f9745c5a.js"><link rel="prefetch" href="/blog/assets/js/29.30f3258a.js"><link rel="prefetch" href="/blog/assets/js/3.d5e82265.js"><link rel="prefetch" href="/blog/assets/js/30.1cf623ee.js"><link rel="prefetch" href="/blog/assets/js/31.83e494ed.js"><link rel="prefetch" href="/blog/assets/js/32.59dcf1a3.js"><link rel="prefetch" href="/blog/assets/js/33.a0357a23.js"><link rel="prefetch" href="/blog/assets/js/34.17675c91.js"><link rel="prefetch" href="/blog/assets/js/35.5dc2f4b3.js"><link rel="prefetch" href="/blog/assets/js/36.559932de.js"><link rel="prefetch" href="/blog/assets/js/37.7bf5e0fe.js"><link rel="prefetch" href="/blog/assets/js/38.c6f516d3.js"><link rel="prefetch" href="/blog/assets/js/39.ff29fed5.js"><link rel="prefetch" href="/blog/assets/js/4.7c157add.js"><link rel="prefetch" href="/blog/assets/js/40.84b002f1.js"><link rel="prefetch" href="/blog/assets/js/41.81aff4d1.js"><link rel="prefetch" href="/blog/assets/js/42.d1fe8e29.js"><link rel="prefetch" href="/blog/assets/js/43.7d907dee.js"><link rel="prefetch" href="/blog/assets/js/44.6b51336f.js"><link rel="prefetch" href="/blog/assets/js/45.93267c6e.js"><link rel="prefetch" href="/blog/assets/js/46.17585841.js"><link rel="prefetch" href="/blog/assets/js/47.8b3d9f23.js"><link rel="prefetch" href="/blog/assets/js/48.093ddcc1.js"><link rel="prefetch" href="/blog/assets/js/49.ab4edd39.js"><link rel="prefetch" href="/blog/assets/js/5.7a70730a.js"><link rel="prefetch" href="/blog/assets/js/50.94b47f2a.js"><link rel="prefetch" href="/blog/assets/js/51.376eff23.js"><link rel="prefetch" href="/blog/assets/js/52.ca3dc021.js"><link rel="prefetch" href="/blog/assets/js/53.8a077464.js"><link rel="prefetch" href="/blog/assets/js/54.60e77a77.js"><link rel="prefetch" href="/blog/assets/js/55.fdf8872e.js"><link rel="prefetch" href="/blog/assets/js/56.d211ae30.js"><link rel="prefetch" href="/blog/assets/js/57.02f5e70e.js"><link rel="prefetch" href="/blog/assets/js/58.b5e51eb7.js"><link rel="prefetch" href="/blog/assets/js/59.0fe16302.js"><link rel="prefetch" href="/blog/assets/js/6.f6a4e939.js"><link rel="prefetch" href="/blog/assets/js/60.226edb4e.js"><link rel="prefetch" href="/blog/assets/js/61.a708c270.js"><link rel="prefetch" href="/blog/assets/js/62.3829f3d8.js"><link rel="prefetch" href="/blog/assets/js/63.60e4bdef.js"><link rel="prefetch" href="/blog/assets/js/64.6ade18cc.js"><link rel="prefetch" href="/blog/assets/js/65.3fbf08b0.js"><link rel="prefetch" href="/blog/assets/js/66.1aa29462.js"><link rel="prefetch" href="/blog/assets/js/67.2d06ab3b.js"><link rel="prefetch" href="/blog/assets/js/68.7733808f.js"><link rel="prefetch" href="/blog/assets/js/69.e4c6aaf3.js"><link rel="prefetch" href="/blog/assets/js/7.f9e6764f.js"><link rel="prefetch" href="/blog/assets/js/70.efc7ecbf.js"><link rel="prefetch" href="/blog/assets/js/71.a0e3ae0d.js"><link rel="prefetch" href="/blog/assets/js/72.cffea857.js"><link rel="prefetch" href="/blog/assets/js/73.b01845e3.js"><link rel="prefetch" href="/blog/assets/js/74.d23b7440.js"><link rel="prefetch" href="/blog/assets/js/75.9793d0b6.js"><link rel="prefetch" href="/blog/assets/js/76.a6a997de.js"><link rel="prefetch" href="/blog/assets/js/77.4e13bc70.js"><link rel="prefetch" href="/blog/assets/js/78.b9b62ffc.js"><link rel="prefetch" href="/blog/assets/js/79.2f4d4ddb.js"><link rel="prefetch" href="/blog/assets/js/8.5f669ddd.js"><link rel="prefetch" href="/blog/assets/js/81.86826579.js"><link rel="prefetch" href="/blog/assets/js/9.3d94997e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.5a9f4582.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">MAGIX</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/javascript/" class="nav-link">博客</a></div><div class="nav-item"><a href="https://github.com/magicxin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/javascript/" class="nav-link">博客</a></div><div class="nav-item"><a href="https://github.com/magicxin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>javascript</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>vue 源码学习</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>vue</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/blog/vue/base.html" class="active sidebar-link">基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/vue/base.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/blog/vue/base.html#vue插件" class="sidebar-link">Vue插件</a></li><li class="sidebar-sub-header"><a href="/blog/vue/base.html#vue缓存" class="sidebar-link">Vue缓存</a></li><li class="sidebar-sub-header"><a href="/blog/vue/base.html#自定义指令vue-directive" class="sidebar-link">自定义指令Vue.directive</a></li><li class="sidebar-sub-header"><a href="/blog/vue/base.html#object-freeze" class="sidebar-link">Object.freeze\(\)</a></li><li class="sidebar-sub-header"><a href="/blog/vue/base.html#track-by-index" class="sidebar-link">track-by=&quot;$index&quot;</a></li><li class="sidebar-sub-header"><a href="/blog/vue/base.html#vm-compile-编译dom" class="sidebar-link">vm.$compile 编译dom</a></li><li class="sidebar-sub-header"><a href="/blog/vue/base.html#vm-emit" class="sidebar-link">vm.$emit</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>nodejs</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>v8</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>网络协议</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>three.js</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>解决方案</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>linux</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>系统架构设计师</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>前端架构</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>android</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>science</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>翻译</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>技术入门</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>草稿箱</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="vue-基础"><a href="#vue-基础" aria-hidden="true" class="header-anchor">#</a> vue 基础</h1> <h2 id="路由"><a href="#路由" aria-hidden="true" class="header-anchor">#</a> 路由</h2> <p>在 vue 实例中获取路由</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$route
<span class="token comment">//获取vue路由所带参</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id 
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>获取常规url参数封装</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getQueryVariable</span><span class="token punctuation">(</span><span class="token parameter">variable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> query <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">;</span>
    query <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> vars <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vars<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> pair <span class="token operator">=</span> vars<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>pair<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> variable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> pair<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> getQueryVariable
</code></pre></div></div> <h3 id="动态参数路径"><a href="#动态参数路径" aria-hidden="true" class="header-anchor">#</a> 动态参数路径</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/hello/:id'</span><span class="token punctuation">,</span> <span class="token comment">// 动态的id</span>
    name<span class="token punctuation">:</span> <span class="token string">'Hello'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> HelloWorld<span class="token punctuation">,</span>
    meta<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        auth<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        keepAlive<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//参数值会被设置到 this.$route.params</span>
</code></pre></div><p>如果从/hello/1 访问 /hello/2，<strong>原来的组件实例会被复用，这也意味着组件的生命周期钩子不会再被调用。</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 解决：</span>
<span class="token comment">// watch（监测变化） $route 对象</span>
<span class="token comment">// beforeRouteUpdate 守卫2.2+</span>
<span class="token function">beforeRouteUpdate</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// react to route changes...</span>
<span class="token comment">// don't forget to call next()</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="路由嵌套"><a href="#路由嵌套" aria-hidden="true" class="header-anchor">#</a> 路由嵌套</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> 
        path<span class="token punctuation">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> 
        component<span class="token punctuation">:</span> User<span class="token punctuation">,</span><span class="token comment">// 符号/会被当做根路径</span>
        children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token comment">// 当 /user/:id/profile 匹配成功，</span>
            <span class="token comment">// UserProfile 会被渲染在 User 的 &lt;router-view&gt; 中</span>
            path<span class="token punctuation">:</span> <span class="token string">'profile'</span><span class="token punctuation">,</span>
            component<span class="token punctuation">:</span> UserProfile
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token comment">// 当 /user/:id/posts 匹配成功</span>
            <span class="token comment">// UserPosts 会被渲染在 User 的 &lt;router-view&gt; 中</span>
            path<span class="token punctuation">:</span> <span class="token string">'posts'</span><span class="token punctuation">,</span>
            component<span class="token punctuation">:</span> UserPosts
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="标签导航"><a href="#标签导航" aria-hidden="true" class="header-anchor">#</a> 标签导航</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/foo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="编程式导航"><a href="#编程式导航" aria-hidden="true" class="header-anchor">#</a> 编程式导航</h3> <p><strong>在 Vue 实例内部，你可以通过</strong></p> <p><code>$router</code></p> <p><strong>访问路由实例。因此你可以调用</strong> <code>this.$router.push</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>location<span class="token punctuation">,</span> onComplete<span class="token operator">?</span><span class="token punctuation">,</span> onAbort<span class="token operator">?</span><span class="token punctuation">)</span>
<span class="token comment">// 字符串</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">)</span>
<span class="token comment">// 对象</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 命名的路由</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 带查询参数，变成 /register?plan=private</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'register'</span><span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> plan<span class="token punctuation">:</span> <span class="token string">'private'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> userId <span class="token operator">=</span> <span class="token number">123</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/123</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/123</span>
<span class="token comment">// 这里的 params 不生效</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user</span>
</code></pre></div><h3 id="router-replace"><a href="#router-replace" aria-hidden="true" class="header-anchor">#</a> router.replace</h3> <p>跟<code>router.push</code>很像，唯一的不同就是，它不会向 history 添加新记录，而是跟它的方法名一样 —— 替换掉当前的 history 记录。</p> <table><thead><tr><th style="text-align:left"></th></tr></thead> <tbody></tbody></table> <table><thead><tr><th style="text-align:left">声明式</th> <th style="text-align:left">编程式</th></tr></thead> <tbody><tr><td style="text-align:left"><code>&lt;router-link :to=&quot;...&quot; replace&gt;</code></td> <td style="text-align:left"><code>router.replace(...)</code></td></tr></tbody></table> <h3 id="router-go"><a href="#router-go" aria-hidden="true" class="header-anchor">#</a> router.go</h3> <p>这个方法的参数是一个整数，意思是在 history 记录中向前或者后退多少步，类似<code>window.history.go(n)</code>。</p> <h3 id="window-history-api"><a href="#window-history-api" aria-hidden="true" class="header-anchor">#</a> window.history api</h3> <p><strong>参考</strong><a href="https://developer.mozilla.org/en-US/docs/Web/API/History" target="_blank" rel="noopener noreferrer"><code>window.history.pushState</code><strong>、</strong><code>window.history.replaceState</code><strong>和</strong><code>window.history.go</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" target="_blank" rel="noopener noreferrer">Browser History APIs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="命名路由"><a href="#命名路由" aria-hidden="true" class="header-anchor">#</a> 命名路由</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token punctuation">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ name: 'user', params: { userId: 123 }}&quot;</span><span class="token operator">&gt;</span>User<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="命名视图"><a href="#命名视图" aria-hidden="true" class="header-anchor">#</a> 命名视图</h3> <p>场景：同时展示多个视图</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/vue/dist/vue.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Named Views<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span><span class="token operator">/</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/other&quot;</span><span class="token operator">&gt;</span><span class="token operator">/</span>other<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;view one&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;view two&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;a&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;view three&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;b&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span> template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;foo&lt;/div&gt;'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> Bar <span class="token operator">=</span> <span class="token punctuation">{</span> template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;bar&lt;/div&gt;'</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> Baz <span class="token operator">=</span> <span class="token punctuation">{</span> template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;baz&lt;/div&gt;'</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>
    routes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> 
        path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token comment">// a single route can define multiple named components</span>
        <span class="token comment">// which will be rendered into &lt;router-view&gt;s with corresponding names.</span>
        components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span> Foo<span class="token punctuation">,</span>
            a<span class="token punctuation">:</span> Bar<span class="token punctuation">,</span>
            b<span class="token punctuation">:</span> Baz
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token string">'/other'</span><span class="token punctuation">,</span>
        components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span> Baz<span class="token punctuation">,</span>
            a<span class="token punctuation">:</span> Bar<span class="token punctuation">,</span>
            b<span class="token punctuation">:</span> Foo
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
router<span class="token punctuation">,</span>
el<span class="token punctuation">:</span> <span class="token string">'#app'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="重定向"><a href="#重定向" aria-hidden="true" class="header-anchor">#</a> 重定向</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> <span class="token function-variable function">redirect</span><span class="token punctuation">:</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 方法接收 目标路由 作为参数</span>
        <span class="token comment">// return 重定向的 字符串路径/路径对象</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="别名"><a href="#别名" aria-hidden="true" class="header-anchor">#</a> 别名</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
routes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
     path<span class="token punctuation">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> alias<span class="token punctuation">:</span> <span class="token string">'/b'</span> 
     <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="导航守卫"><a href="#导航守卫" aria-hidden="true" class="header-anchor">#</a> 导航守卫</h3> <p><strong>如果首次beforeEach未触发，是因为main函数内加载顺序的问题，需要将导航守卫提前。</strong></p> <h3 id="完整的导航解析流程-完整的导航解析流程"><a href="#完整的导航解析流程-完整的导航解析流程" aria-hidden="true" class="header-anchor">#</a> 完整的导航解析流程 {#完整的导航解析流程}</h3> <ol><li>导航被触发。</li> <li>在失活的组件里调用离开守卫。</li> <li>调用全局的<code>beforeEach</code>守卫。</li> <li>在重用的组件里调用<code>beforeRouteUpdate</code>守卫 (2.2+)。</li> <li>在路由配置里调用<code>beforeEnter</code>。</li> <li>解析异步路由组件。</li> <li>在被激活的组件里调用<code>beforeRouteEnter</code>。</li> <li>调用全局的<code>beforeResolve</code>守卫 (2.5+)。</li> <li>导航被确认。</li> <li>调用全局的<code>afterEach</code>钩子。</li> <li>触发 DOM 更新。</li> <li>用创建好的实例调用<code>beforeRouteEnter</code>守卫中传给<code>next</code>的回调函数。</li></ol> <h3 id="路由元信息"><a href="#路由元信息" aria-hidden="true" class="header-anchor">#</a> 路由元信息</h3> <p>自定义的meta键值对，可以在<code>$route.matched中遍历，判断登录状态等功能。</code></p> <h3 id="数据渲染"><a href="#数据渲染" aria-hidden="true" class="header-anchor">#</a> 数据渲染</h3> <ol><li>在导航前获取数据。beforeRouteEnter</li> <li>在导航后获取数据。//created loading</li></ol> <h3 id="模块导出"><a href="#模块导出" aria-hidden="true" class="header-anchor">#</a> 模块导出</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">methodA</span> <span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    dataB <span class="token punctuation">:</span> <span class="token string">'aaa'</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="vue插件"><a href="#vue插件" aria-hidden="true" class="header-anchor">#</a> Vue插件</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">Vue<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//创建一个全局组件</span>
Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token function">addPath</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token string">'http://carowl.cn'</span><span class="token operator">+</span>url
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$<span class="token punctuation">.</span>host<span class="token operator">+</span>url
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$ <span class="token operator">=</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//使用 this.addPath this.$.xxx</span>
</code></pre></div><h2 id="vue缓存"><a href="#vue缓存" aria-hidden="true" class="header-anchor">#</a> Vue缓存</h2> <p>当路由有参数，无法返回时，可以用keepAlive，但是会导致进入的页面不会刷新，为了解决这个问题，引入了一个新的生命周期函数</p> <p><strong>activated,想要刷新的内容在此执行。</strong></p> <p><strong>deactivated this.$destroy销毁</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>meta<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    auth <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    keepAlive <span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;$route.meta.keepAlive&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!$route.meta.keepAlive&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="如果keepalive不能缓存滚动位置"><a href="#如果keepalive不能缓存滚动位置" aria-hidden="true" class="header-anchor">#</a> 如果keepalive不能缓存滚动位置</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'scroll-save'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">inserted</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>y <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'commend'</span><span class="token punctuation">)</span>
    el<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> el<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>y
<span class="token punctuation">}</span>
</code></pre></div><h2 id="自定义指令vue-directive"><a href="#自定义指令vue-directive" aria-hidden="true" class="header-anchor">#</a> 自定义指令Vue.directive</h2> <p>在vue中如果需要操作dom，可以使用drective方法，这里ode需求是对一个表单的validate封装。因为我使用了mint-ui组件，而常规的valiadate需要自己写样式，所以我打算基于mint-ui做一个可扩展的封装。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//注册一个最简的自定义指令，直接在元素中v-focus就可以使用</span>
Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当被绑定的元素插入到 DOM 中时……</span>
    <span class="token function-variable function">inserted</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>但是inserted只有在创建dom时才执行，所以这里明显不符合我的使用场景。</p> <h3 id="钩子"><a href="#钩子" aria-hidden="true" class="header-anchor">#</a> 钩子</h3> <ul><li><p><code>bind</code>：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。</p></li> <li><p><code>inserted</code>：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。</p></li> <li><p><code>update</code>：所在组件的 VNode 更新时调用，<strong>但是可能发生在其子 VNode 更新之前</strong>。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新 (详细的钩子函数参数见下)。</p></li> <li><p><code>componentUpdated</code>：指令所在组件的 VNode<strong>及其子 VNode</strong>全部更新后调用。</p></li> <li><p><code>unbind</code>：只调用一次，指令与元素解绑时调用。</p></li></ul> <p>参数</p> <ul><li><code>el</code>：指令所绑定的元素，可以用来直接操作 DOM 。</li> <li><code>binding</code>：一个对象，包含以下属性：</li> <li><code>name</code>：指令名，不包括<code>v-</code>前缀。</li> <li><code>value</code>：指令的绑定值，例如：<code>v-my-directive=&quot;1 + 1&quot;</code>中，绑定值为<code>2</code>。</li> <li><code>oldValue</code>：指令绑定的前一个值，仅在<code>update</code>和<code>componentUpdated</code>钩子中可用。无论值是否改变都可用。</li> <li><code>expression</code>：字符串形式的指令表达式。例如<code>v-my-directive=&quot;1 + 1&quot;</code>中，表达式为<code>&quot;1 + 1&quot;</code>。</li> <li><code>arg</code>：传给指令的参数，可选。例如<code>v-my-directive:foo</code>中，参数为<code>&quot;foo&quot;</code>。</li> <li><code>modifiers</code>：一个包含修饰符的对象。例如：<code>v-my-directive.foo.bar</code>中，修饰符对象为<code>{ foo: true, bar: true }</code>。</li> <li><code>vnode</code>：Vue 编译生成的虚拟节点。移步<a href="https://cn.vuejs.org/v2/api/#VNode-%E6%8E%A5%E5%8F%A3" target="_blank" rel="noopener noreferrer">VNode API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来了解更多详情。</li> <li><code>oldVnode</code>：上一个虚拟节点，仅在<code>update</code>和<code>componentUpdated</code>钩子中可用。</li></ul> <h2 id="object-freeze"><a href="#object-freeze" aria-hidden="true" class="header-anchor">#</a> Object.freeze()</h2> <h2 id="track-by-index"><a href="#track-by-index" aria-hidden="true" class="header-anchor">#</a> track-by=&quot;$index&quot;</h2> <h2 id="vm-compile-编译dom"><a href="#vm-compile-编译dom" aria-hidden="true" class="header-anchor">#</a> vm.$compile 编译dom</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//但注意这是个私有api，随时都有可能变动，并且这种做法有违vue的理念。</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        value<span class="token punctuation">:</span> <span class="token string">'demo'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'{{ value }}'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$compile</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="vm-emit"><a href="#vm-emit" aria-hidden="true" class="header-anchor">#</a> vm.$emit</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>event<span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token punctuation">[</span>param1<span class="token punctuation">,</span>param2<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="数据绑定不实时刷新"><a href="#数据绑定不实时刷新" aria-hidden="true" class="header-anchor">#</a> 数据绑定不实时刷新</h3> <p>根本原因是使用的语法并未触发Vue的get set监听。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>prefer<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tool<span class="token punctuation">[</span>item<span class="token punctuation">.</span>sn<span class="token punctuation">]</span><span class="token comment">//不会触发刷新</span>
<span class="token comment">// Vue.set 触发监听</span>
Vue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>example1<span class="token punctuation">.</span>items<span class="token punctuation">,</span> indexOfItem<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
<span class="token comment">// Array.prototype.splice`</span>
example1<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>indexOfItem<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
example1<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>newLength<span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>carts<span class="token punctuation">,</span> index<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="上传文件"><a href="#上传文件" aria-hidden="true" class="header-anchor">#</a> 上传文件</h3> <p>accept可接受的文件类型，可选参数：</p> <ul><li>| audio/* | 接受所有的声音文件。 |
| :--- | :--- |
| video/* | 接受所有的视频文件。 |
| image/* | 接受所有的图像文件。 |
| MIME_type | MIME_type |</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;file&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;vr&quot;</span> @change<span class="token operator">=</span><span class="token string">&quot;uploadVr&quot;</span> accept<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><p>判断文件类型（根据后缀）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> copy_ulr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>vr_file<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> suffix <span class="token operator">=</span>copy_ulr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>copy_ulr<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>copy_ulr<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>suffix<span class="token punctuation">)</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>suffix <span class="token operator">===</span> <span class="token punctuation">(</span><span class="token string">'.zip'</span> <span class="token operator">||</span> <span class="token string">'.rar'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>vr_url <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>vr_file<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="聊天输入框"><a href="#聊天输入框" aria-hidden="true" class="header-anchor">#</a> 聊天输入框</h3> <p>输入框支持emoji图片显示 ： 使用div代替textarea</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>contenteditable<span class="token operator">=</span><span class="token string">&quot;true&quot;</span>
</code></pre></div><p>div支持keydown</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>@keydown<span class="token operator">=</span><span class="token string">&quot;trySendMessage($event)&quot;</span> tabIndex<span class="token operator">=</span><span class="token string">&quot;1&quot;</span>
</code></pre></div><h3 id="v-model"><a href="#v-model" aria-hidden="true" class="header-anchor">#</a> v-model</h3> <p>实际上是个语法糖，实际效果与下相同:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>v<span class="token operator">-</span>bind<span class="token punctuation">:</span>value<span class="token operator">=</span><span class="token string">&quot;message&quot;</span> v<span class="token operator">-</span>on<span class="token punctuation">:</span>input<span class="token operator">=</span><span class="token string">&quot;setMsg&quot;</span>
</code></pre></div><p>v-model 只支持&lt;select&gt; &lt;input&gt; &lt;textarea&gt;</p> <h3 id="vue-component"><a href="#vue-component" aria-hidden="true" class="header-anchor">#</a> Vue.component</h3> <p>Vue.component 注册组件要在new Vue之前才能成功注册。
vm == Vue实例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token comment">//选项</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p><strong>所有的 Vue.js 组件其实都是被扩展的 Vue 实例。</strong> <strong>v-once : 一次性数据，不会随着data改变而改变</strong> <strong>过滤器只能在 <code>mustache {message}</code> 绑定和<code>v-bind</code>表达式（从 2.1.0 开始支持）中使用，其他复杂情况使用计算属性</strong></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code></code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/vue-source/init0001.html" class="prev">
          事件拦截器绑定
        </a></span> <span class="next"><a href="/blog/nodejs/">
          简述
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/blog/assets/js/app.6d92ea86.js" defer></script><script src="/blog/assets/js/80.eb982d6e.js" defer></script>
  </body>
</html>
