<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端架构设计 | MAGIX</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.b119fe2f.css" as="style"><link rel="preload" href="/blog/assets/js/app.7de9164d.js" as="script"><link rel="preload" href="/blog/assets/js/24.937cb4a3.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.f9661e3f.js"><link rel="prefetch" href="/blog/assets/js/11.84ed3257.js"><link rel="prefetch" href="/blog/assets/js/12.0b332606.js"><link rel="prefetch" href="/blog/assets/js/13.f1123190.js"><link rel="prefetch" href="/blog/assets/js/14.4cb76a67.js"><link rel="prefetch" href="/blog/assets/js/15.ce33b901.js"><link rel="prefetch" href="/blog/assets/js/16.73000ac7.js"><link rel="prefetch" href="/blog/assets/js/17.db6e6f95.js"><link rel="prefetch" href="/blog/assets/js/18.bfb481e8.js"><link rel="prefetch" href="/blog/assets/js/19.4d9ba12c.js"><link rel="prefetch" href="/blog/assets/js/2.42716945.js"><link rel="prefetch" href="/blog/assets/js/20.aca3f94f.js"><link rel="prefetch" href="/blog/assets/js/21.1a5609f6.js"><link rel="prefetch" href="/blog/assets/js/22.2ebf2696.js"><link rel="prefetch" href="/blog/assets/js/23.c30dd29b.js"><link rel="prefetch" href="/blog/assets/js/25.2f5d5675.js"><link rel="prefetch" href="/blog/assets/js/26.92dc07a0.js"><link rel="prefetch" href="/blog/assets/js/27.f6cc4f9c.js"><link rel="prefetch" href="/blog/assets/js/28.32606a28.js"><link rel="prefetch" href="/blog/assets/js/29.e403cf92.js"><link rel="prefetch" href="/blog/assets/js/3.9357aacf.js"><link rel="prefetch" href="/blog/assets/js/30.475d60c5.js"><link rel="prefetch" href="/blog/assets/js/31.a8329d38.js"><link rel="prefetch" href="/blog/assets/js/32.2d6653bb.js"><link rel="prefetch" href="/blog/assets/js/33.6fea3997.js"><link rel="prefetch" href="/blog/assets/js/34.66a4987d.js"><link rel="prefetch" href="/blog/assets/js/35.2d9d19c3.js"><link rel="prefetch" href="/blog/assets/js/36.a2e0c5dd.js"><link rel="prefetch" href="/blog/assets/js/37.5c973500.js"><link rel="prefetch" href="/blog/assets/js/38.f7bb8781.js"><link rel="prefetch" href="/blog/assets/js/39.6d899459.js"><link rel="prefetch" href="/blog/assets/js/4.58337494.js"><link rel="prefetch" href="/blog/assets/js/40.37141c45.js"><link rel="prefetch" href="/blog/assets/js/41.ff16f98a.js"><link rel="prefetch" href="/blog/assets/js/42.9c134058.js"><link rel="prefetch" href="/blog/assets/js/43.a78ce2e9.js"><link rel="prefetch" href="/blog/assets/js/44.8d679494.js"><link rel="prefetch" href="/blog/assets/js/45.1d4277cd.js"><link rel="prefetch" href="/blog/assets/js/46.6e5a14e5.js"><link rel="prefetch" href="/blog/assets/js/47.9833374a.js"><link rel="prefetch" href="/blog/assets/js/48.88171623.js"><link rel="prefetch" href="/blog/assets/js/49.fb4c5522.js"><link rel="prefetch" href="/blog/assets/js/5.3ac39ba8.js"><link rel="prefetch" href="/blog/assets/js/50.9cde37c5.js"><link rel="prefetch" href="/blog/assets/js/51.d311fbb4.js"><link rel="prefetch" href="/blog/assets/js/52.0b3d3661.js"><link rel="prefetch" href="/blog/assets/js/53.e6734ee6.js"><link rel="prefetch" href="/blog/assets/js/54.644bc96f.js"><link rel="prefetch" href="/blog/assets/js/55.e49ffc9f.js"><link rel="prefetch" href="/blog/assets/js/56.649a002d.js"><link rel="prefetch" href="/blog/assets/js/57.0a2b68a4.js"><link rel="prefetch" href="/blog/assets/js/58.8e547bb0.js"><link rel="prefetch" href="/blog/assets/js/59.1d20024d.js"><link rel="prefetch" href="/blog/assets/js/6.5f18b713.js"><link rel="prefetch" href="/blog/assets/js/60.d0a15ac1.js"><link rel="prefetch" href="/blog/assets/js/61.e44dc9f3.js"><link rel="prefetch" href="/blog/assets/js/62.cd73b0e4.js"><link rel="prefetch" href="/blog/assets/js/63.23894eac.js"><link rel="prefetch" href="/blog/assets/js/7.95e09fae.js"><link rel="prefetch" href="/blog/assets/js/8.2801459b.js"><link rel="prefetch" href="/blog/assets/js/9.521d3e71.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b119fe2f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">MAGIX</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/javascript/" class="nav-link">博客</a></div><div class="nav-item"><a href="https://github.com/magicxin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/javascript/" class="nav-link">博客</a></div><div class="nav-item"><a href="https://github.com/magicxin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>javascript</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>nodejs</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>网络协议</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>three.js</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>解决方案</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>linux</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>vue 源码学习</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>系统架构设计师</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>前端架构</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/blog/front-design/front-design.html" class="active sidebar-link">前端架构设计</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/front-design/front-design.html#为什么前端也需要架构设计" class="sidebar-link">为什么前端也需要架构设计</a></li><li class="sidebar-sub-header"><a href="/blog/front-design/front-design.html#怎样设计当前的前端架构" class="sidebar-link">怎样设计当前的前端架构</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>android</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>science</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>翻译</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>草稿箱</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="前端架构设计"><a href="#前端架构设计" aria-hidden="true" class="header-anchor">#</a> 前端架构设计</h1> <h2 id="为什么前端也需要架构设计"><a href="#为什么前端也需要架构设计" aria-hidden="true" class="header-anchor">#</a> 为什么前端也需要架构设计</h2> <h3 id="网页的发展史"><a href="#网页的发展史" aria-hidden="true" class="header-anchor">#</a> 网页的发展史</h3> <p>网页在一开始诞生的时候是纯静态的，是为了方便科学研究人员查看文档、上传论文来使用。</p> <img src="/blog/front-design/static-page.png"> <p>随后 css 的发布，让网页变得多姿多彩，不再局限于浏览器本身的样子，但是随着网页从学术逐渐面向大众，纯静态的网页
就暴露出了它的局限性。于是开始出现了动态页面。</p> <h3 id="后端主导的阶段"><a href="#后端主导的阶段" aria-hidden="true" class="header-anchor">#</a> 后端主导的阶段</h3> <p>相信大部分人对这种开发模式都十分熟悉，大名鼎鼎的 MVC 架构甚至沿用至今，无数优秀的框架和语言涌出。此时，开发的结构
是这样的：</p> <img src="/blog/front-design/servlet.png"> <p>controller 接收 request 请求，将信息分发给 view ，并且可以通过模板引擎渲染 view 来使用 Model 中的数据，此时的开发
模式主要是由网页开发人员根据原型做出设计图,开发出静态的 html 页面，再由后端人员修改成 jsp 页面，并集成模板。然而这种
开发模式也存在大量的问题。</p> <ul><li>网页开发人员不懂业务代码，设计出的文档结构，并不能完全和业务契合。</li> <li>后端人员不懂 html 和 css ，经常会因为套入模板导致样式错乱。</li></ul> <p>这样的合作方式显然是不愉快的。</p> <h3 id="前后分离阶段"><a href="#前后分离阶段" aria-hidden="true" class="header-anchor">#</a> 前后分离阶段</h3> <p>不论是由前端编辑 jsp 还是让后端编辑 html 都是很棘手的方式，因此前后分离应运而生。此时前端的概念逐渐产生，前端工程师编写
单页应用，通过 ajax 的方式与后端进行交互，后端人员不再考虑 view 层，直接渲染前端静态资源。</p> <img src="/blog/front-design/front-end.png"> <p>现在 view 层和 controller 完全分离了，但是前后端的分工并不明确。后端接收返回的资源是多样的，但是前端人员并不清楚同样的一个
获取用户信息的接口是以什么样的资源来返回，未知是很痛苦的，因此到目前的阶段，前后端并没有完全分离开，接口调试也引起了分歧。</p> <h3 id="restful"><a href="#restful" aria-hidden="true" class="header-anchor">#</a> RESTFUL</h3> <p>由于前后分离的交界处是接口，因此有必要对接口进行规范化，两端都遵循这个规范来处理，而不必和不同的人讨论出不同的解决方案。
改良传统的返回码 200，规定了多种返回类型，让接口返回类型更准确的表达出错误信息。定位资源使用 http 动词来描述，避免 uri 中
出现 <code>getUser</code>等方式。</p> <h3 id="前端框架"><a href="#前端框架" aria-hidden="true" class="header-anchor">#</a> 前端框架</h3> <p>到目前为止，后端的项目架构优化了许多，将整个 view 卸下，而诞生的前端还没有很好的认清当前的位置，除了更新资源以外，还按照着
静态资源的模式来开发 html ，存储、项目生命周期、路由都没有处理，仍然在利用后台框架的便捷方式，处理路由跳转，存储 session 信息。。。
随着前端的逐渐发展，大家突然意识到，前端开发人员失去了对前端界面的控制，无法保证静态资源部署以后的功能。无论何时，不可控是非常
可怕的事。
前端框架应运而生，框架构建了前端项目完整的生命周期，路由控制，状态管理，完全解除了后台的“控制”，对于前端开发人员，项目变得可控了。
此外为了从开发阶段到生产阶段的过度，显然存在大量的工作，而这些工作往往是反复、繁琐的，因此工具必不可少，项目构建工具由此产生，
同时也分离了开发、生产模式，为前端的开发、调试提供了极大的便利。</p> <h3 id="关注点的改变"><a href="#关注点的改变" aria-hidden="true" class="header-anchor">#</a> 关注点的改变</h3> <img src="/blog/front-design/follow-point.png"> <p>随着互联网的发展，用户也从一开始的只关注功能逐渐开始对体验更加重视。而此时项目的重心也逐渐向前端偏移，决定数据的往往不是后台架构
本身，而是用户，或者说界面。相对于稳定的服务端数据资源，大量的需求变更是灾难性的，几乎不可能对传承几十年的架构做大的调整，对此
的做法往往都是加接口、抽象表。。。导致的结果就是：表面上看起来风平浪静，但是却暗流涌动。可以说重用性几乎为 0 。但是出现这样的结果
往往是：</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>前端：这个数据用不了
后端：你等等我改下</p></div> <p>没有设计的垒砖往往是破坏性的，之后的每一块砖都偏离了搭好的中垂线。优秀的后端开发者往往会设计好合理的表结构，不同的场景下只需要将不同的
model 聚合到一起，单独为页面提供数据支持，而初始的架构和表结构，是不会因为页面的改变轻易变动的。目前最好的方式是再分理出 controller 层，
由前端人员使用 nodejs 控制，这样就完全分离了界面对后端的影响，但是受目前大环境的因素，会使用 nodejs 、拥有前端架构设计能力的人远远不够。
因此往往是前后端人员配合来模拟 controller 的分离。</p> <h2 id="怎样设计当前的前端架构"><a href="#怎样设计当前的前端架构" aria-hidden="true" class="header-anchor">#</a> 怎样设计当前的前端架构</h2> <p>随着移动互联的普及，移动端以及 PC 端对体验越来越重视，分离出来的&quot;前端&quot;也越来越放大，继续使用原有的开发方式，已经有一种 hold 不住的感觉。
而良好的架构设计，能给设计人员一种掌控全局的感觉。</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>相信很多人都经历过这样的场景:</p> <ul><li>页面内容复杂，有没有注释，动辄几千行代码，读起来异常费劲。</li> <li>静态资源迁移、项目移植、接口变更，需要通过全局搜索来更改路径。</li> <li>人员的信息，在一个页面更新，结果其他的界面没有同步。</li> <li>修改一处代码，结果牵一发动全身。。。</li> <li>项目开发完成，项目需求变更，整个变更的模块需要重新开发。</li></ul></div> <h3 id="模块化"><a href="#模块化" aria-hidden="true" class="header-anchor">#</a> 模块化</h3> <p>项目只要开始进行就不可能是一成不变的。因此前期的设计尤为重要，如果房子的地基没有打好，那上层的建筑师技艺再高超，也拯救不了整栋楼。前端架构设计
中很重要的一环就是模块化。</p> <img src="/blog/front-design/module.png"> <h3 id="模块的封装"><a href="#模块的封装" aria-hidden="true" class="header-anchor">#</a> 模块的封装</h3> <ul><li>低耦合</li> <li>高内聚</li> <li>健壮性</li></ul> <p>和面向对象的封装原则类似，模块的封装需要满足以上三点，来保证复用性。一般来说，通用模块分为两种，业务模块和组件。简单来说的化，当你需要反复复制代码，
那么你可能需要封装一个模块；当你需要反复修改模块的内容时，那么你可能需要拆分一个模块。</p> <h3 id="资源分类"><a href="#资源分类" aria-hidden="true" class="header-anchor">#</a> 资源分类</h3> <p>资源分类比较容易理解，就是把项目内公共资源统一管理。比如接口、域名、静态资源路径、错误码、国际化等等。良好的归纳也是架构中必不可少的一环。</p> <h3 id="状态管理"><a href="#状态管理" aria-hidden="true" class="header-anchor">#</a> 状态管理</h3> <h3 id="项目拆分"><a href="#项目拆分" aria-hidden="true" class="header-anchor">#</a> 项目拆分</h3></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/system-architect/database.html" class="prev">
          数据库
        </a></span> <span class="next"><a href="/blog/android/create.html">
          入门
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/blog/assets/js/app.7de9164d.js" defer></script><script src="/blog/assets/js/24.937cb4a3.js" defer></script>
  </body>
</html>
